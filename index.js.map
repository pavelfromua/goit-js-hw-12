{"version":3,"file":"index.js","sources":["../src/js/common.js","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst showMessage = (type, title, message) => {\n  iziToast[type]({\n    title,\n    message,\n    timeout: 2000,\n    progressBar: false,\n    position: 'center'\n  });\n};\n\nconst errorMessage = (message, title = '') => {\n  showMessage('error', title, message);\n};\n\nconst successMessage = (message, title = '') => {\n  showMessage('success', title, message);\n};\n\nexport { errorMessage, successMessage };","import axios from 'axios';\n\nconst perPage = 15;\n\nconst requestParams = new URLSearchParams({\n  key: '33588137-20261db95d6a52f088d4718c9',\n  q: '',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: 'true',\n  per_page: perPage,\n});\n\nasync function processData(data) {\n  if (data.hits.length === 0) {\n    throw new Error('Sorry, there are no images matching your search query. Please try again!');\n  }\n\n  return Promise.resolve(data.hits.map(hit => ({\n    webformatURL: hit.webformatURL,\n    largeImageURL: hit.largeImageURL,\n    tags: hit.tags,\n    likes: hit.likes,\n    views: hit.views,\n    comments: hit.comments,\n    downloads: hit.downloads,\n  })));\n}\n\nconst fetchFirstPage = async (query) => {\n  return await fetchPage(query, 1);\n};\n\nconst fetchNextPage = async (query) => {\n  const nextPage = Number.parseInt(requestParams.get(\"page\")) + 1;\n\n  return await fetchPage(query, nextPage);\n};\n\nasync function fetchPage(query, page) {\n  requestParams.set('q', query);\n  requestParams.set('page', page);\n\n  const response = await axios.get(`https://pixabay.com/api/?${requestParams}`);\n  const images = await processData(response.data);\n\n  return {\n    images: images,\n    noMoreImages: response.data.totalHits <= page * perPage,\n  };\n}\n\nexport { fetchFirstPage, fetchNextPage };","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst getGalleryItem = ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n  return `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n    <div class=\"image-details\">\n       <div class=\"details-header\">Likes</div>\n        <div class=\"details-header\">Views</div>\n        <div class=\"details-header\">Comments</div>\n        <div class=\"details-header\">Downloads</div>\n        <div class=\"details-value\">${likes}</div>\n        <div class=\"details-value\">${views}</div>\n        <div class=\"details-value\">${comments}</div>\n        <div class=\"details-value\">${downloads}</div>\n      </div>\n  </a>\n</li>`;\n};\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n  animationSpeed: 300,\n  overlay: true,\n  overlayOpacity: 0.5,\n});\n\nlightbox.on('show.simplelightbox', function() {\n});\n\nlightbox.on('closed.simplelightbox', function() {\n});\n\nconst renderGallery = (gallery, images) => {\n  gallery.insertAdjacentHTML('beforeend', images.map(image => getGalleryItem(image)).join(''));\n  lightbox.refresh();\n};\n\nexport { renderGallery };\n","import { errorMessage, successMessage } from './js/common.js';\nimport { fetchFirstPage, fetchNextPage } from './js/pixabay-api.js';\nimport { renderGallery } from './js/render-functions.js';\n\nconst searchFieldSelector = document.querySelector('.search-field');\nconst topLoader = document.querySelector('#top-loader');\nconst gallery = document.querySelector('.gallery');\nconst loadFormSelector = document.querySelector('#load-form');\nconst bottomLoader = document.querySelector('#bottom-loader');\nconst noResultsSelector = document.querySelector('#no-results');\n\nlet lastQuery = '';\n\ndocument.querySelector('#search-form').addEventListener('submit', async (event) => {\n  event.preventDefault();\n\n  const query = searchFieldSelector.value.trim();\n  if (query.length === 0 || query === lastQuery) {\n    return;\n  }\n\n  gallery.innerHTML = '';\n  lastQuery = query;\n  topLoader.classList.remove('hidden');\n  let noMoreImages = false;\n\n  try {\n    const data = await fetchFirstPage(query);\n    noMoreImages = data.noMoreImages;\n    renderGallery(gallery, data.images);\n    loadFormSelector.classList.remove('hidden');\n    smoothScroll();\n  } catch (error) {\n    errorMessage(error.message);\n    loadFormSelector.classList.add('hidden');\n  } finally {\n    topLoader.classList.add('hidden');\n  }\n\n  if (noMoreImages) {\n    noResultsSelector.classList.remove('hidden');\n    bottomLoader.classList.add('hidden');\n    loadFormSelector.classList.add('hidden');\n  } else {\n    topLoader.classList.add('hidden');\n  }\n});\n\nloadFormSelector.addEventListener('submit', async (event) => {\n  event.preventDefault();\n\n  const query = searchFieldSelector.value.trim();\n  if (query.length === 0) {\n    return;\n  }\n\n  lastQuery = query;\n\n  bottomLoader.classList.remove('hidden');\n  loadFormSelector.classList.add('hidden');\n  let noMoreImages = false;\n\n  try {\n    const data = await fetchNextPage(query);\n    noMoreImages = data.noMoreImages;\n    renderGallery(gallery, data.images);\n    smoothScroll();\n  } catch (error) {\n    errorMessage(error.message);\n    gallery.innerHTML = '';\n  }\n\n  if (noMoreImages) {\n    noResultsSelector.classList.remove('hidden');\n    bottomLoader.classList.add('hidden');\n    loadFormSelector.classList.add('hidden');\n  } else {\n    bottomLoader.classList.add('hidden');\n    loadFormSelector.classList.remove('hidden');\n  }\n});\n\nconst smoothScroll = () => {\n  const galleryItem = document.querySelector('.gallery-item');\n\n  if (galleryItem) {\n    const itemHeight = galleryItem.getBoundingClientRect().height;\n\n    window.scrollBy({\n      top: itemHeight * 2,\n      behavior: 'smooth',\n    });\n\n  }\n};\n\n"],"names":["showMessage","type","title","message","iziToast","errorMessage","perPage","requestParams","processData","data","hit","fetchFirstPage","query","fetchPage","fetchNextPage","nextPage","page","response","axios","getGalleryItem","webformatURL","largeImageURL","tags","likes","views","comments","downloads","lightbox","SimpleLightbox","renderGallery","gallery","images","image","searchFieldSelector","topLoader","loadFormSelector","bottomLoader","noResultsSelector","lastQuery","event","noMoreImages","smoothScroll","error","galleryItem","itemHeight"],"mappings":"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"}